module.exports=[22517,e=>e.a(async(t,a)=>{try{let t=await e.y("playwright");e.n(t),a()}catch(e){a(e)}},!0),57775,e=>e.a(async(t,a)=>{try{var o=e.i(22517),s=t([o]);[o]=s.then?(await s)():s;class n{baseUrl="https://cincpro.chilipiper.com/concierge-router/link/lp-request-a-demo-agent-advice";async scrapeSlots(e,t,a,s){try{console.log(`🎯 Starting scrape for ${e} ${t} (${a})`);let n=await o.chromium.launch({headless:!0,args:["--no-sandbox","--disable-dev-shm-usage","--disable-gpu","--disable-web-security","--disable-features=VizDisplayCompositor","--disable-background-timer-throttling","--disable-backgrounding-occluded-windows","--disable-renderer-backgrounding","--disable-extensions","--disable-sync","--disable-default-apps","--hide-scrollbars","--mute-audio","--no-first-run","--no-default-browser-check","--disable-hang-monitor","--disable-prompt-on-repost","--disable-breakpad","--disable-features=site-per-process","--disable-site-isolation-trials","--disable-blink-features=AutomationControlled","--disable-infobars","--window-size=1280,720"]}),r=await n.newPage();r.setDefaultNavigationTimeout(6e4),await r.route("**/*",e=>{"image"===e.request().resourceType()||"stylesheet"===e.request().resourceType()||"font"===e.request().resourceType()?e.abort():e.continue()}),console.log(`Navigating to: ${this.baseUrl}`),await r.goto(this.baseUrl,{waitUntil:"domcontentloaded"}),await r.fill('input[name="FirstName"]',e),await r.fill('input[name="LastName"]',t),await r.fill('input[name="Email"]',a),await r.fill('input[name="Phone"]',s),await r.click('button[type="submit"]'),console.log("Form submitted successfully"),await r.waitForTimeout(500),await r.waitForSelector('[data-id="calendar-day-button"]',{timeout:1e3}),console.log("✅ Calendar loaded successfully");let i=await this.getAvailableSlots(r);await n.close();let l=[];for(let[e,t]of Object.entries(i))for(let a of t.slots)l.push({date:e,time:a,gmt:"GMT-05:00 America/Chicago (CDT)"});let c={success:!0,data:{total_slots:l.length,total_days:Object.keys(i).length,note:`Found ${Object.keys(i).length} days with ${l.length} total booking slots`,slots:l}};return console.log(`✅ Scraping completed successfully: ${l.length} slots across ${Object.keys(i).length} days`),c}catch(e){return console.error("Scraping error:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error occurred"}}}async getAvailableSlots(e){let t={},a=0;for(console.log("🚀 Starting slot collection"),console.log(`📊 Max weeks to check: 4`);a<4;){a++,console.log(`🔍 Week ${a}: Looking for available days...`);let o=await this.getCurrentWeekSlots(e);if(!o||0===o.length){if(console.log(`⚠️ No slots found in Week ${a}. Attempting to navigate to next week.`),!await this.navigateToNextWeek(e)){console.log("❌ Next week button is disabled or not found. No more weeks available.");break}await e.waitForTimeout(200);continue}for(let e of o){let a=e.date;t[a]?console.log(`⚠️ Duplicate date found: ${a}, skipping`):(t[a]=e,console.log(`✅ Day ${Object.keys(t).length}: ${a} - ${e.slots.length} slots`))}if(console.log(`📈 Progress: ${Object.keys(t).length} unique days collected so far`),!await this.navigateToNextWeek(e)){console.log("❌ Next week button is disabled or not found. No more weeks available.");break}await e.waitForTimeout(200)}return console.log(`🏁 Final result: Successfully collected ${Object.keys(t).length} days of slots`),console.log(`📋 Collected dates: ${Object.keys(t)}`),t}async getCurrentWeekSlots(e){let t=[];await e.waitForSelector('[data-id="calendar-day-button"]',{timeout:1e3}),await e.waitForTimeout(100);let a=await e.$$('[data-id="calendar-day-button"]');console.log(`🔍 Found ${a.length} day buttons in current week`);let o=[];for(let e of a){let t=await e.isEnabled(),a=await e.textContent();console.log(`📅 Button: '${a?.substring(0,50)}...' (enabled: ${t})`),t&&o.push(e)}for(let a of(console.log(`🚀 Processing ${o.length} enabled day buttons...`),o)){await a.click(),await e.waitForTimeout(25);let o=await e.$('[data-id="selected-day-info"]'),s=await o?.textContent()||"Unknown Date",n=await e.$$('[data-id="time-slot-button"]'),r=await Promise.all(n.map(async e=>await e.textContent()));r.length>0&&(t.push({date:s.trim(),slots:r.filter(e=>e).map(e=>e.trim())}),console.log(`✅ Found ${r.length} slots for ${s.trim()}`)),await e.waitForTimeout(25)}return t}async navigateToNextWeek(e){let t=await e.$('[data-id="next-week-button"]');return t&&await t.isEnabled()?(console.log("➡️ Clicking next week button..."),await t.click(),await e.waitForTimeout(25),console.log("✅ Successfully clicked next week button"),await e.waitForSelector('[data-id="calendar-day-button"]',{timeout:500}),console.log("✅ Successfully moved to next week"),!0):(console.log("❌ Next week button is disabled"),!1)}}e.s(["ChiliPiperScraper",()=>n]),a()}catch(e){a(e)}},!1),58790,e=>e.a(async(t,a)=>{try{var o=e.i(89171),s=e.i(57775),n=t([s]);[s]=n.then?(await n)():n;let l=["test-key-123","prod-key-456","dev-key-789"];async function r(e){try{console.log("🔍 Get-Slots API Debug - Request received");let t=e.headers.get("Authorization")||"";if(console.log(`🔍 Auth header: ${t.substring(0,20)}...`),!function(e){if(!e.startsWith("Bearer "))return!1;let t=e.substring(7);return l.includes(t)}(t))return console.log("❌ Authentication failed"),o.NextResponse.json({success:!1,error:"Unauthorized",message:"Invalid or missing API key. Please provide a valid Bearer token.",usage:{example:"Authorization: Bearer your-api-key-here"}},{status:401});console.log("✅ Authentication successful");let a=await e.json();console.log(`✅ Parsed data:`,a);let n=["first_name","last_name","email","phone"].filter(e=>!a[e]);if(n.length>0)return console.log(`❌ Missing required fields: ${n.join(", ")}`),o.NextResponse.json({success:!1,error:"Missing required fields",message:`The following fields are required: ${n.join(", ")}`},{status:400});console.log("🔍 Starting scraping process...");let r=new s.ChiliPiperScraper,i=await r.scrapeSlots(a.first_name,a.last_name,a.email,a.phone);if(!i.success)return console.log(`❌ Scraping failed: ${i.error}`),o.NextResponse.json({success:!1,error:"Scraping failed",message:i.error},{status:500});return console.log("✅ Scraping completed successfully"),o.NextResponse.json(i)}catch(e){if(console.error("❌ API error:",e),e instanceof SyntaxError)return o.NextResponse.json({success:!1,error:"Invalid JSON",message:"Request body must be valid JSON"},{status:400});return o.NextResponse.json({success:!1,error:"Internal Server Error",message:e instanceof Error?e.message:"Unknown error occurred"},{status:500})}}async function i(e){return new o.NextResponse(null,{status:200,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, OPTIONS","Access-Control-Allow-Headers":"Content-Type, Authorization"}})}e.s(["OPTIONS",()=>i,"POST",()=>r]),a()}catch(e){a(e)}},!1),15690,e=>e.a(async(t,a)=>{try{var o=e.i(47909),s=e.i(74017),n=e.i(96250),r=e.i(59756),i=e.i(61916),l=e.i(14444),c=e.i(37092),u=e.i(69741),d=e.i(16795),p=e.i(87718),g=e.i(95169),h=e.i(47587),w=e.i(66012),f=e.i(70101),m=e.i(26937),b=e.i(10372),y=e.i(93695);e.i(52474);var v=e.i(220),R=e.i(58790),k=t([R]);[R]=k.then?(await k)():k;let S=new o.AppRouteRouteModule({definition:{kind:s.RouteKind.APP_ROUTE,page:"/api/get-slots/route",pathname:"/api/get-slots",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/src/app/api/get-slots/route.ts",nextConfigOutput:"",userland:R}),{workAsyncStorage:A,workUnitAsyncStorage:E,serverHooks:N}=S;function x(){return(0,n.patchFetch)({workAsyncStorage:A,workUnitAsyncStorage:E})}async function C(e,t,a){S.isDev&&(0,r.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let o="/api/get-slots/route";o=o.replace(/\/index$/,"")||"/";let n=await S.prepare(e,t,{srcPage:o,multiZoneDraftMode:!1});if(!n)return t.statusCode=400,t.end("Bad Request"),null==a.waitUntil||a.waitUntil.call(a,Promise.resolve()),null;let{buildId:R,params:k,nextConfig:x,parsedUrl:C,isDraftMode:A,prerenderManifest:E,routerServerContext:N,isOnDemandRevalidate:T,revalidateOnlyGenerated:$,resolvedPathname:P,clientReferenceManifest:O,serverActionsManifest:_}=n,j=(0,u.normalizeAppPath)(o),q=!!(E.dynamicRoutes[j]||E.routes[P]),F=async()=>((null==N?void 0:N.render404)?await N.render404(e,t,C,!1):t.end("This page could not be found"),null);if(q&&!A){let e=!!E.routes[P],t=E.dynamicRoutes[j];if(t&&!1===t.fallback&&!e){if(x.experimental.adapterPath)return await F();throw new y.NoFallbackError}}let U=null;!q||S.isDev||A||(U=P,U="/index"===U?"/":U);let I=!0===S.isDev||!q,M=q&&!I;_&&O&&(0,l.setReferenceManifestsSingleton)({page:o,clientReferenceManifest:O,serverActionsManifest:_,serverModuleMap:(0,c.createServerModuleMap)({serverActionsManifest:_})});let D=e.method||"GET",H=(0,i.getTracer)(),W=H.getActiveScopeSpan(),B={params:k,prerenderManifest:E,renderOpts:{experimental:{authInterrupts:!!x.experimental.authInterrupts},cacheComponents:!!x.cacheComponents,supportsDynamicResponse:I,incrementalCache:(0,r.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:x.cacheLife,waitUntil:a.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,a,o)=>S.onRequestError(e,t,o,N)},sharedContext:{buildId:R}},K=new d.NodeNextRequest(e),z=new d.NodeNextResponse(t),L=p.NextRequestAdapter.fromNodeNextRequest(K,(0,p.signalFromNodeResponse)(t));try{let n=async e=>S.handle(L,B).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let a=H.getRootSpanAttributes();if(!a)return;if(a.get("next.span_type")!==g.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${a.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let s=a.get("next.route");if(s){let t=`${D} ${s}`;e.setAttributes({"next.route":s,"http.route":s,"next.span_name":t}),e.updateName(t)}else e.updateName(`${D} ${o}`)}),l=!!(0,r.getRequestMeta)(e,"minimalMode"),c=async r=>{var i,c;let u=async({previousCacheEntry:s})=>{try{if(!l&&T&&$&&!s)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let o=await n(r);e.fetchMetrics=B.renderOpts.fetchMetrics;let i=B.renderOpts.pendingWaitUntil;i&&a.waitUntil&&(a.waitUntil(i),i=void 0);let c=B.renderOpts.collectedTags;if(!q)return await (0,w.sendResponse)(K,z,o,B.renderOpts.pendingWaitUntil),null;{let e=await o.blob(),t=(0,f.toNodeOutgoingHttpHeaders)(o.headers);c&&(t[b.NEXT_CACHE_TAGS_HEADER]=c),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let a=void 0!==B.renderOpts.collectedRevalidate&&!(B.renderOpts.collectedRevalidate>=b.INFINITE_CACHE)&&B.renderOpts.collectedRevalidate,s=void 0===B.renderOpts.collectedExpire||B.renderOpts.collectedExpire>=b.INFINITE_CACHE?void 0:B.renderOpts.collectedExpire;return{value:{kind:v.CachedRouteKind.APP_ROUTE,status:o.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:a,expire:s}}}}catch(t){throw(null==s?void 0:s.isStale)&&await S.onRequestError(e,t,{routerKind:"App Router",routePath:o,routeType:"route",revalidateReason:(0,h.getRevalidateReason)({isStaticGeneration:M,isOnDemandRevalidate:T})},N),t}},d=await S.handleResponse({req:e,nextConfig:x,cacheKey:U,routeKind:s.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:E,isRoutePPREnabled:!1,isOnDemandRevalidate:T,revalidateOnlyGenerated:$,responseGenerator:u,waitUntil:a.waitUntil,isMinimalMode:l});if(!q)return null;if((null==d||null==(i=d.value)?void 0:i.kind)!==v.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==d||null==(c=d.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});l||t.setHeader("x-nextjs-cache",T?"REVALIDATED":d.isMiss?"MISS":d.isStale?"STALE":"HIT"),A&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let p=(0,f.fromNodeOutgoingHttpHeaders)(d.value.headers);return l&&q||p.delete(b.NEXT_CACHE_TAGS_HEADER),!d.cacheControl||t.getHeader("Cache-Control")||p.get("Cache-Control")||p.set("Cache-Control",(0,m.getCacheControlHeader)(d.cacheControl)),await (0,w.sendResponse)(K,z,new Response(d.value.body,{headers:p,status:d.value.status||200})),null};W?await c(W):await H.withPropagatedContext(e.headers,()=>H.trace(g.BaseServerSpan.handleRequest,{spanName:`${D} ${o}`,kind:i.SpanKind.SERVER,attributes:{"http.method":D,"http.target":e.url}},c))}catch(t){if(t instanceof y.NoFallbackError||await S.onRequestError(e,t,{routerKind:"App Router",routePath:j,routeType:"route",revalidateReason:(0,h.getRevalidateReason)({isStaticGeneration:M,isOnDemandRevalidate:T})}),q)throw t;return await (0,w.sendResponse)(K,z,new Response(null,{status:500})),null}}e.s(["handler",()=>C,"patchFetch",()=>x,"routeModule",()=>S,"serverHooks",()=>N,"workAsyncStorage",()=>A,"workUnitAsyncStorage",()=>E]),a()}catch(e){a(e)}},!1)];

//# sourceMappingURL=%5Broot-of-the-server%5D__76749b5e._.js.map